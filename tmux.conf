# List of plugins
# 插件列表
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
# added example 
# set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin '2kabhishek/tmux2k'
set -g @plugin 'b0o/tmux-autoreload'
set -g @plugin 'nhdaly/tmux-better-mouse-mode'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'

set-environment -g LC_TIME en_US.UTF-8

# act like GNU screen
# 模仿 GNU screen
unbind C-b
set -g prefix C-a
bind a send-prefix
bind C-a send-prefix
bind b send-prefix
bind C-b send-prefix

# create new windows/panes in same directory
# 在同一目录中创建新窗口/面板
bind c new-window -c "#{pane_current_path}"
bind "\"" split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# enable and disable keyboard input for panes
# 启用和禁用面板的键盘输入
bind < select-pane -d \; display-message "input disabled"
bind > select-pane -e \; display-message "input enabled"

# size windows based on clients looking at that window
# 根据查看该窗口的客户端调整窗口大小
setw -g aggressive-resize on

# enable mouse control
# 启用鼠标控制
set -g mouse on

# start window numbers at 1 to match keyboard order with tmux order
# 将窗口编号从 1 开始以匹配键盘顺序与 tmux 顺序
set -g base-index 1

# start pane numbers at 1 to match keyboard order with tmux order
# 将面板编号从 1 开始以匹配键盘顺序与 tmux 顺序
setw -g pane-base-index 1

# reenable automatic renaming for the current window
# 为当前窗口重新启用自动重命名
bind N setw automatic-rename on \; display-message "automatic rename enabled"

# renumber windows sequentially after closing any of them
# 关闭任何窗口后按顺序重新编号窗口
set -g renumber-windows on

# monitor windows for activity
# 监控窗口活动
setw -g monitor-activity on

# short wait for escape sequences (10ms, needed for Option+arrow keys in iTerm2)
# 转义序列短暂等待（10ms，iTerm2 中 Option+方向键需要此设置）
set -sg escape-time 10

# display pane numbers for longer
# 更长时间显示面板号
set -g display-panes-time 2000

# increase scrollback lines
# 增加回滚线数
set -g history-limit 65536

# keybinding to clear history
# 清除历史的键绑定
bind C-k clear-history \; display-message "history cleared"

# C-b ! breaks current pane into separate window
# C-b ! 将当前面板分离为单独窗口
# join a pane/window from the current session into the current window
# 将来自当前会话的面板/窗口加入到当前窗口
bind @ command-prompt -p "create pane from:" "pane -s ':%%'"

# reload the .tmux.conf file with prefix + R
# 用 prefix + R 重新加载 .tmux.conf 文件（C-r 已被 tmux-resurrect 占用）
bind R source-file ~/.tmux.conf \; display-message "configuration reloaded"

# toggle passthrough of prefix
# 切换前缀的直通
bind P if-shell "[ \"$(tmux show-options -g prefix)\" = \"prefix C-a\" ]" '\
    set -g prefix C-b; display-message "passthrough enabled"; refresh-client -S; \
    ' '\
    set -g prefix C-a; display-message "passthrough disabled"; refresh-client -S; \
    '

#### color (Solarized 256)
#### 颜色（Solarized 256）
set -g status-style bg=colour235,fg=colour136
setw -g window-status-style fg=colour244
setw -g window-status-current-style fg=colour166
setw -g window-status-activity-style fg=colour61
setw -g window-status-bell-style fg=colour61
set -g pane-border-style fg=colour235
set -g pane-active-border-style fg=colour240
set -g message-style bg=colour235,fg=colour166

# pane number display
# 面板号显示
set -g display-panes-active-colour colour166
# blue（蓝色）
set -g display-panes-colour colour33
# orange（橙色）

# clock
# 时钟
setw -g clock-mode-colour colour64
# green（绿色）

# Allow local customization in ~/.tmux_local.conf
# 允许在 ~/.tmux_local.conf 中进行本地自定义
if-shell "[ -f ~/.tmux_local.conf ]" 'source ~/.tmux_local.conf'


# My adds
# 我的添加
set -g default-terminal "tmux-256color"
set -as terminal-features ",xterm-256color:RGB"
set -as terminal-features ",screen-256color:RGB"
set -as terminal-features ",tmux-256color:RGB"


bind | split-window -h -c "#{pane_current_path}"
# 水平分割面板（保留在当前目录）
bind - split-window -v -c "#{pane_current_path}"
# 垂直分割面板（保留在当前目录）

# use Option+arrow keys to switch panes (no prefix needed)
# 使用 Option+方向键在面板之间移动光标（无需前缀键）
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D


# theme configuration
# 主题配置

set -g @prefix_highlight_fg 'white'
# default is 'colour231'（默认为 'colour231'）
set -g @prefix_highlight_bg 'blue'
# default is 'colour04'（默认为 'colour04'）

# use a theme
# 使用主题
set -g @tmux2k-theme 'duo'

set -g @tmux2k-light-yellow '#ffffff' # change light yellow base color
set -g @tmux2k-bg-main '#111a21' # change bg to white
set -g @tmux2k-prefix-highlight '#f8c800' # change prefix color

set -g @tmux2k-duo-fg "#ffffff"
set -g @tmux2k-duo-bg "#111a21" # 让 duo 基色与 bg-main 一致，消除色差

# 窗口列表圆角分隔符
set -g @tmux2k-window-list-left-sep ""
set -g @tmux2k-window-list-right-sep ""
# 窗口列表：白底黑字
set -g @tmux2k-window-list-colors "black white"

# set the left and right plugin sections
set -g @tmux2k-left-plugins "git cpu ram"
set -g @tmux2k-right-plugins "battery network time"

# contorl refresh rate, applies to bandwidth, ping
set -g @tmux2k-refresh-rate 5
set -g @tmux2k-time-format "%a %H:%M"
# to customize plugin colors (example)
# 自定义插件颜色（示例）
# set -g @tmux2k-[plugin-name]-colors "[background] [foreground]"
set -g @tmux2k-cpu-colors "red black"



# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
# 初始化 TMUX 插件管理器（将此行保持在 tmux.conf 最下方）
run 'tmux/plugins/tpm/tpm'
